
/*---------------------TABLAS----------------------------------------------------*/


CREATE TABLE ESTATUS(
	EST_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	EST_NOMBRE VARCHAR(50) NOT NULL,
	CONSTRAINT PK_ID_ESTATUS PRIMARY KEY (EST_ID)
);

CREATE TABLE MODELO (
	MOD_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	MOD_TIPO VARCHAR(50) NOT NULL,
	CONSTRAINT PK_ID_MODELO PRIMARY KEY (MOD_ID)
);

CREATE TABLE FLOTA(
	FLO_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	FLO_FOTO BLOB NULL,
	FLO_NOMBRE VARCHAR(50) NOT NULL,
	FLO_VELOCIDAD_MAX FLOAT(30) NOT NULL,
	FLO_ALCANCE_millas FLOAT(30) NOT NULL,
	FLO_ALTITUD_MAX_ft FLOAT(30) NOT NULL,
	FLO_ENVERGADURA_m FLOAT(30) NOT NULL,
	FLO_ALTURA_CABINA_m FLOAT(30) NOT NULL,
	FLO_ANCHO_CABINA_m VARCHAR(50) NOT NULL,
	CONSTRAINT PK_ID_FLOTA PRIMARY KEY (FLO_ID)
);

CREATE TABLE AEROLINEA (
	AERO_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	AERO_FOTO BLOB NULL,
	AERO_NOMBRE VARCHAR(50) NOT NULL,
	AERO_TIPO VARCHAR(50),
	PRECIO_KM MONTOS,
	CONSTRAINT PK_ID_AEROLINEA PRIMARY KEY (AERO_ID)
);


CREATE TABLE MOD_FLOTA (
	MOFL_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	FK_MOFL_MODELO NUMBER(5),
	MOFL_CANTIDAD NUMBER(10) NOT NULL,
	FK_MOFL_FLOTA NUMBER(5) NOT NULL,
	FK_MOFL_AEROLINEA NUMBER(5) NOT NULL,
	CONSTRAINT PK_ID_MOD_FLOTA PRIMARY KEY (MOFL_ID),
	CONSTRAINT FK_MOFL_MODELO FOREIGN KEY (FK_MOFL_MODELO) REFERENCES MODELO (MOD_ID),
	CONSTRAINT FK_MOFL_FLOTA FOREIGN KEY (FK_MOFL_FLOTA) REFERENCES FLOTA (FLO_ID),
	CONSTRAINT FK_MOFL_AEROLINEA FOREIGN KEY (FK_MOFL_AEROLINEA) REFERENCES AEROLINEA (AERO_ID)
);


CREATE TABLE CLASE (
	CLA_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	CLA_NOMBRE VARCHAR(50) NOT NULL,
	CLA_INCREMENTO NUMBER(30),
	CONSTRAINT PK_ID_CLASE PRIMARY KEY (CLA_ID)
);

CREATE TABLE ASI_CLA (
	ASCL_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	ASCL_CANTIDAD VARCHAR(50) NOT NULL,
	FK_ASCL_CLASE NUMBER(30) NOT NULL,
	FK_ASCL_FLOTA NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_ASICLA PRIMARY KEY (ASCL_ID),
	CONSTRAINT FK_ASCL_CLASE FOREIGN KEY (FK_ASCL_CLASE) REFERENCES CLASE (CLA_ID),
	CONSTRAINT FK_ASCL_FLOTA FOREIGN KEY (FK_ASCL_FLOTA) REFERENCES FLOTA(FLO_ID)
);

CREATE TABLE ASIENTO (
	ASI_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	ASI_NUMERO NUMBER(5) NOT NULL,
	ASI_TIPO VARCHAR(5) NOT NULL,
	FK_ASI_CLASE NUMBER (5) NOT NULL,
	FK_ASI_ESTATUS NUMBER(5) NOT NULL,
	CONSTRAINT PK_ID_ASIENTO PRIMARY KEY (ASI_ID),
	CONSTRAINT FK_ASI_ESTATUS FOREIGN KEY (FK_ASI_ESTATUS) REFERENCES ESTATUS (EST_ID),
	CONSTRAINT FK_ASI_CLASE FOREIGN KEY (FK_ASI_CLASE) REFERENCES ASI_CLA (ASCL_ID)

);



CREATE TABLE LUGAR (
	LUG_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	LUG_NOMBRE VARCHAR(50) NOT NULL,
	LUG_TIPO VARCHAR(50) NOT NULL,
	FK_LUG_LUGAR NUMBER(5),
	SIGLAS VARCHAR(50),
	CONSTRAINT PK_ID_LUGAR PRIMARY KEY (LUG_ID),
	CONSTRAINT CHECK_TIPO_LUGAR CHECK (LUG_TIPO IN ('PAIS','ESTADO','PARROQUIA','MUNICIPIO')),
	CONSTRAINT FK_LUGAR_LUGAR FOREIGN KEY (FK_LUG_LUGAR) REFERENCES LUGAR (LUG_ID)
); 

CREATE TABLE RUTA(
	RUT_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	RUT_DISTANCIA NUMBER(30) NOT NULL,
	FK_RUT_SALIDA NUMBER(5),/*SALIDA*/ 
	FK_RUT_LLEGADA NUMBER(5),/*LLEGADA*/ 
	CONSTRAINT PK_ID_RUTA PRIMARY KEY (RUT_ID),
	CONSTRAINT FK_RUTA_SALIDA FOREIGN KEY (FK_RUT_SALIDA) REFERENCES LUGAR (LUG_ID),
	CONSTRAINT FK_RUTA_LLEGADA FOREIGN KEY (FK_RUT_LLEGADA) REFERENCES LUGAR (LUG_ID)
);

CREATE TABLE VUELO (
	VUE_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	VUE_FECHA FECHAS,
	VUE_HORA_SALIDA DATE NOT NULL,
	VUE_HORA_LLEGADA DATE NOT NULL,
	FK_VUE_VUELO NUMBER (5),
	FK_VUE_FLOTA NUMBER(5) NOT NULL,
	FK_VUE_RUTA NUMBER(5) NOT NULL,
	FK_VUE_ESTATUS NUMBER(5) NOT NULL,
	CONSTRAINT PK_ID_VUELO PRIMARY KEY (VUE_ID),
	CONSTRAINT FK_VUE_VUELO FOREIGN KEY (FK_VUE_VUELO) REFERENCES VUELO (VUE_ID),
	CONSTRAINT FK_VUE_FLOTA FOREIGN KEY (FK_VUE_FLOTA) REFERENCES MOD_FLOTA (MOFL_ID),
	CONSTRAINT FK_VUE_RUTA FOREIGN KEY (FK_VUE_RUTA) REFERENCES RUTA (RUT_ID),
	CONSTRAINT FK_VUE_ESTATUS FOREIGN KEY (FK_VUE_ESTATUS) REFERENCES ESTATUS (EST_ID)
);

CREATE TABLE USUARIO(
	USU_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	USU_FOTO BLOB NULL,
	USU_DATOS DATOS_BASICOS,
	USU_CORREO VARCHAR(50) NOT NULL,
	USU_TELEFONO VARCHAR(30) NOT NULL,
	FK_USU_ASIENTO NUMBER (5),
	USU_SEXO VARCHAR (3) NOT NULL,
	CONSTRAINT PK_ID_USUARIO PRIMARY KEY (USU_ID),
	CONSTRAINT FK_USU_ASIENTO FOREIGN KEY (FK_USU_ASIENTO) REFERENCES ASIENTO (ASI_ID)
);

CREATE TABLE RESERVA  (
	RES_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	RES_FECHA DATE NOT NULL,
	TOTAL MONTOS,
	FK_RES_USUARIO NUMBER (5),
	CONSTRAINT PK_ID_RESERVA PRIMARY KEY (RES_ID),
	CONSTRAINT FK_RES_USUARIO FOREIGN KEY (FK_RES_USUARIO) REFERENCES USUARIO (USU_ID)

);

CREATE TABLE RES_VUE (
	REVU_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	REVU_MONTO MONTOS,
	FK_REVU_RESERVA NUMBER (5),
	FK_REVU_VUELO NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_REVU PRIMARY KEY (REVU_ID),
	CONSTRAINT FK_REVU_RESERVA FOREIGN KEY (FK_REVU_RESERVA) REFERENCES RESERVA (RES_ID),
	CONSTRAINT FK_REVU_VUELO FOREIGN KEY (FK_REVU_VUELO)REFERENCES VUELO (VUE_ID)
);

CREATE TABLE USU_RES_VUE (
	URV_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	FK_URV_USUARIO NUMBER (5) NOT NULL,
	FK_URV_RESVUE NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_URV PRIMARY KEY (URV_ID),
	CONSTRAINT FK_URV_USUARIO FOREIGN KEY (FK_URV_USUARIO) REFERENCES USUARIO (USU_ID),
	CONSTRAINT FK_URV_RESVUE FOREIGN KEY (FK_URV_RESVUE)REFERENCES RES_VUE (REVU_ID)
);


CREATE TABLE AUTOMOVIL (
	AUT_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	AUT_FOTO BLOB NULL,
	AUT_MARCAMODELO VARCHAR(50) NOT NULL,
	AUT_TIPO VARCHAR(50) NOT NULL,
	AUT_CAPACIDAD NUMBER(5) NOT NULL,
	AUT_PUERTAS NUMBER(5) NOT NULL,
	AUT_CAMBIO VARCHAR(20) NOT NULL,
	
	CONSTRAINT PK_ID_AUTOMOVIL PRIMARY KEY (AUT_ID)
);


CREATE TABLE PROVEEDOR (
	PRO_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	PRO_NOMBRE VARCHAR(50) NOT NULL,
	PRO_FOTO BLOB NULL,
	CONSTRAINT PK_ID_PROVEEDOR PRIMARY KEY (PRO_ID)
);

CREATE TABLE PROV_AUTO (
	PRAU_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	PRAU_PRECIO_DIA MONTOS,
	FK_PRAU_AUTOMOVIL NUMBER(5) NOT NULL,
	FK_PRAU_PROVEEDOR NUMBER(5) NOT NULL,
	FK_PRAU_ESTATUS NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_PROV_AUTO PRIMARY KEY (PRAU_ID),
	CONSTRAINT FK_PRAU_AUTOMOVIL FOREIGN KEY (FK_PRAU_AUTOMOVIL) REFERENCES AUTOMOVIL (AUT_ID),
	CONSTRAINT FK_PRAU_PROVEEDOR FOREIGN KEY (FK_PRAU_PROVEEDOR) REFERENCES PROVEEDOR (PRO_ID),
	CONSTRAINT FK_PRAU_ESTATUS FOREIGN KEY (FK_PRAU_ESTATUS) REFERENCES ESTATUS(EST_ID)
	
);
 
CREATE TABLE SEDE(
	SED_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	SED_NOMBRE VARCHAR(50) NOT NULL,
	FK_SED_LUGAR NUMBER(5) NOT NULL,
	FK_SED_PROVEEDOR NUMBER(5) NOT NULL,
	CONSTRAINT PK_ID_SEDE PRIMARY KEY (SED_ID),
	CONSTRAINT FK_SED_LUGAR FOREIGN KEY (FK_SED_LUGAR) REFERENCES LUGAR (LUG_ID),
	CONSTRAINT FK_SED_PROVEEDOR FOREIGN KEY (FK_SED_PROVEEDOR) REFERENCES PROVEEDOR (PRO_ID)
);

CREATE TABLE RES_AUT(
	REAU_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	REAU_MONTO MONTOS,
	REAU_FECHA FECHAS,
	FK_REAU_PROVEEDOR NUMBER(5) NOT NULL,
	FK_REAU_RECOGE NUMBER(5) NOT NULL,
	FK_REAU_RECIBE NUMBER(5) NOT NULL,
	FK_REAU_RESERVA NUMBER(5),
	CONSTRAINT PK_ID_RES_AUT PRIMARY KEY (REAU_ID),
	CONSTRAINT FK_REAU_PROVEEDOR FOREIGN KEY (FK_REAU_PROVEEDOR) REFERENCES PROV_AUTO (PRAU_ID),
	CONSTRAINT FK_REAU_RECOGE FOREIGN KEY (FK_REAU_RECOGE) REFERENCES SEDE (SED_ID),
	CONSTRAINT FK_REAU_RECIBE FOREIGN KEY (FK_REAU_RECIBE) REFERENCES SEDE (SED_ID),
	CONSTRAINT FK_REAU_RESERVA FOREIGN KEY (FK_REAU_RESERVA) REFERENCES RESERVA (RES_ID)
);

CREATE TABLE MILLA (
	MIL_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	MIL_CONVERSION NUMBER(5),
	CONSTRAINT PK_ID_MILLA PRIMARY KEY (MIL_ID)
);

CREATE TABLE MIL_USU(
	MIUS_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	MIUS_FECHA DATE NOT NULL,
	MIUS_ACUMULADO FLOAT(10) NOT NULL,
	FK_MIUS_MILLA NUMBER(5),
	FK_MIUS_USUARIO NUMBER(5) NOT NULL,
	CONSTRAINT PK_ID_MIUS PRIMARY KEY (MIUS_ID),
	CONSTRAINT FK_MIUS_USUARIO FOREIGN KEY (FK_MIUS_USUARIO) REFERENCES USUARIO (USU_ID),	
	CONSTRAINT FK_MIUS_MILLA FOREIGN KEY (FK_MIUS_MILLA) REFERENCES MILLA (MIL_ID)
);


CREATE TABLE TP_CREDITO (
	TPC_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	TPC_NUMERO NUMBER(20) NOT NULL,
	TPC_TIPOCREDITO  VARCHAR (50)NOT NULL,
	CONSTRAINT PK_ID_TPC PRIMARY KEY (TPC_ID),
	CONSTRAINT CHECK_NUMERO_TPC CHECK (TPC_NUMERO>0),
	CONSTRAINT CHECK_TIPOCREDITO_TPC CHECK (TPC_TIPOCREDITO IN ('VISA','MASTER','AMERICAN EXPRESS'))
);

CREATE TABLE TP_DEBITO (
	TPD_ID  NUMBER GENERATED ALWAYS AS IDENTITY,
	TPD_NUMERO NUMERIC(20) NOT NULL,
	CONSTRAINT PK_CODIGO_TPD PRIMARY KEY (TPD_ID),
	CONSTRAINT CHECK_NUMERO_TPD CHECK (TPD_NUMERO>0)
);

CREATE TABLE PAGO (
	PAG_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	PAG_MONTO MONTOS,
	FK_PAG_MILLA NUMBER(5),
	FK_PAG_CREDITO NUMBER(5),
	FK_PAG_DEBITO NUMBER(5),
	FK_PAG_RESERVA NUMBER(5) NOT NULL,
	PAG_TIPO VARCHAR(30) NOT NULL,
	CONSTRAINT PK_ID_PAGO PRIMARY KEY (PAG_ID),
	CONSTRAINT CHECK_PAG_TIPO CHECK (PAG_TIPO IN ('TDD','TDC','MILLA')),
	CONSTRAINT FK_PAG_MILLA FOREIGN KEY (FK_PAG_MILLA) REFERENCES MILLA (MIL_ID),
	CONSTRAINT FK_PAG_CREDITO FOREIGN KEY (FK_PAG_CREDITO) REFERENCES TP_CREDITO (TPC_ID),
	CONSTRAINT FK_PAG_DEBITO FOREIGN KEY (FK_PAG_DEBITO) REFERENCES TP_DEBITO (TPD_ID),
	CONSTRAINT FK_PAG_RESERVA FOREIGN KEY (FK_PAG_RESERVA) REFERENCES RESERVA (RES_ID)
);

CREATE TABLE HOTEL  (
	HOT_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	HOT_NOMBRE VARCHAR(50) NOT NULL,
	HOT_PUNTUACION FLOAT(30) NOT NULL,
	HOT_FOTO BLOB NULL,
	CONSTRAINT PK_ID_HOT PRIMARY KEY (HOT_ID)
);

CREATE TABLE HOT_LUGAR  (
	HOLU_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	FK_HOT_LUGAR NUMBER (5) NOT NULL,
	FK_HOT_HOTEL NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_HOLU PRIMARY KEY (HOLU_ID),
	CONSTRAINT FK_HOT_LUGAR FOREIGN KEY (FK_HOT_LUGAR) REFERENCES LUGAR (LUG_ID),
	CONSTRAINT FK_HOT_HOTEL FOREIGN KEY (FK_HOT_HOTEL) REFERENCES HOTEL (HOT_ID)
);

CREATE TABLE HABITACION (
	HAB_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	HAB_NUMERO NUMBER(10) NOT NULL,
	FK_HAB_HOLU NUMBER(5) NOT NULL,
	HAB_DESCRIPCION VARCHAR(200) NOT NULL,
	HAB_CAPACIDAD NUMBER(30) NOT NULL,
	HAB_PRECIOXDIA MONTOS,
	FK_HAB_ESTATUS NUMBER(5) NOT NULL,
	CONSTRAINT PK_ID_HABITACION PRIMARY KEY (HAB_ID),
	CONSTRAINT FK_HAB_ESTATUS FOREIGN KEY (FK_HAB_ESTATUS) REFERENCES ESTATUS (EST_ID),
	CONSTRAINT FK_HAB_HOLU FOREIGN KEY (FK_HAB_HOLU) REFERENCES HOT_LUGAR (HOLU_ID)
);


CREATE TABLE RES_HOT(
	REHO_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	REHO_FECHA FECHAS,
	REHO_MONTO MONTOS,
	FK_REHO_HABITACION NUMBER(5) NOT NULL,
	FK_REHO_RESERVA NUMBER(5),
	CONSTRAINT PK_ID_RES_HOT PRIMARY KEY (REHO_ID),
	CONSTRAINT FK_REHO_HABITACION FOREIGN KEY (FK_REHO_HABITACION) REFERENCES HABITACION (HAB_ID),
	CONSTRAINT FK_REHO_RESERVA FOREIGN KEY (FK_REHO_RESERVA) REFERENCES RESERVA (RES_ID)
);


CREATE TABLE SEGURO (
	SEG_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	SEG_NOMBRE VARCHAR (40) NOT NULL,
	SEG_FOTO BLOB NULL,
	CONSTRAINT PK_ID_SEG PRIMARY KEY (SEG_ID)
);

CREATE TABLE SERVICIO (
	SER_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	SER_NOMBRE VARCHAR(50) NOT NULL,
	SER_PRECIO MONTOS,
	CONSTRAINT PK_ID_SER PRIMARY KEY (SER_ID)
);

CREATE TABLE SEG_SERV (
	SESE_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	FK_SESE_SEGURO NUMBER (5) NOT NULL,
	FK_SESE_SERVICIO NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_SESE PRIMARY KEY (SESE_ID),
	CONSTRAINT FK_SESE_SEGURO FOREIGN KEY (FK_SESE_SEGURO) REFERENCES SEGURO (SEG_ID),
	CONSTRAINT FK_SESE_SERVICIO FOREIGN KEY (FK_SESE_SERVICIO) REFERENCES SERVICIO (SER_ID)
);

CREATE TABLE SEG_RES(
	SERE_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	SERE_FECHA FECHAS,
	FK_SERE_SERVICIO NUMBER (5) NOT NULL,
	SERE_TOTAL MONTOS,
	FK_SERE_RESERVA NUMBER(5),
	CONSTRAINT PK_ID_SERE PRIMARY KEY (SERE_ID),
	CONSTRAINT FK_SERE_SERVICIO FOREIGN KEY (FK_SERE_SERVICIO) REFERENCES SEG_SERV (SESE_ID),
	CONSTRAINT FK_SERE_RESERVA FOREIGN KEY (FK_SERE_RESERVA) REFERENCES RESERVA (RES_ID)
);

------------------------------/* ENTREGA TRES */---------------
CREATE TABLE ROL (
	ROL_ID NUMBER GENERATED ALWAYS AS IDENTITY, 
	ROL_NOMBRE VARCHAR (50) NOT NULL,
	CONSTRAINT PK_ID_ROL PRIMARY KEY (ROL_ID),
);

CREATE TABLE PRIVILEGIO (
	PRIV_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	PRIV_NOMBRE VARCHAR (50) NOT NULL,
	CONSTRAINT PK_ID_PRIV PRIMARY KEY (PRIV_ID);
);

CREATE TABLE ROL_PRIV (
	ROLPRI_ID NUMBER GENERATED ALWAYS AS IDENTITY,
	FK_RP_PRIV NUMBER (5) NOT NULL,
	FK_RP_ROL NUMBER (5) NOT NULL,
	CONSTRAINT PK_ID_ROLPRI PRIMARY KEY (ROLPRI_ID),
	CONSTRAINT FK_RP_PRIV FOREIGN KEY (FK_RP_PRIV) REFERENCES PRIVILEGIO (PRIV_ID),
	CONSTRAINT FK_RP_ROL FOREIGN KEY (FK_RP_ROL) REFERENCES ROL (ROL_ID)
);


